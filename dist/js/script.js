(()=>{"use strict";const t=new class{async get(t){try{const e=await fetch(t);if(!e.ok)throw new Error;return await e.json()}catch(t){return Promise.reject(t)}}},e=new class{createElement(t,e,n=document.body,r,o){const s=document.createElement(t);if(n?.appendChild(s),s.textContent=e,r)for(const t in r)s.addEventListener(t,r[t]);if(o)for(const t in o)s.setAttribute(t,o[t].toString());return s}};function n(){return function(t,e=0){let n,r=[];for(let o=0;o<e;o++)n=new Date(t),n.setDate(n.getDate()+o),r.push(n);return r}(new Date((new Date).setDate(1)),90).map((t=>t.toLocaleDateString("en-GB")))}window.onload=async function(){const r=document.querySelector(".api-buttons"),{buttons:o}=await async function(){try{const e=chrome.runtime.getURL("config.json");return await t.get(e)}catch(t){return Promise.reject(t)}}(),s=function(t,n){const r=[];for(const o of n){const{label:n}=o;r.push(e.createElement("button",n,t))}return r}(r,o),a=function(t){const{start:e,end:r}=function(){const t=n();return{start:t[0],end:t[t.length-1]}}();return t.map((t=>({...t,start:e,end:r})))}(o);var c;c=a,s.forEach(((e,r)=>{e.addEventListener("click",(async()=>{const e=await async function(e){try{const n=function(t){const{start:e,end:n,IDtypology:r,IdCategory:o,siteId:s,persons:a}=t;return`https://eg.almaviva-visa.services/api/sites/disabled-dates/?start=${e}&end=${n}&siteId=${s}&persons=${a}&IDtypology=${r}&IdCategory=${o}`}(e);return await t.get(n)}catch(t){return Promise.reject(t)}}(c[r]),o=(s=e.map((t=>t.date.split("-").reverse().join("/"))),n().filter((t=>!s.includes(t))));var s;console.table(o)}))}))}})();